# CCUsage Electron Monitor

macOSã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã«å¸¸é§ã™ã‚‹Claude Codeä½¿ç”¨é‡ç›£è¦–ãƒ„ãƒ¼ãƒ«ï¼ˆTypeScript/Electronç‰ˆï¼‰

## æ¦‚è¦

ccusage CLIãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦Claude Codeã®ä½¿ç”¨é‡ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç›£è¦–ã—ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã«è¡¨ç¤ºã™ã‚‹Electronã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ã«TypeScript + React + Electronã§æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

## æ©Ÿèƒ½

- âœ… **ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼å¸¸é§**: ã‚·ã‚¹ãƒ†ãƒ ãƒˆãƒ¬ã‚¤ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: 30ç§’é–“éš”ã§ã®è‡ªå‹•æ›´æ–°
- âœ… **ä½¿ç”¨é‡è¡¨ç¤º**: ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã€ã‚³ã‚¹ãƒˆã€é€²æ—ç‡ã‚’è¡¨ç¤º
- âœ… **è¦–è¦šçš„ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼**: ä½¿ç”¨é‡ã«å¿œã˜ãŸã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- âœ… **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: è©³ç´°ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã¨å¾©æ—§æ©Ÿèƒ½
- âœ… **TypeScript**: å‹å®‰å…¨ãªé–‹ç™ºç’°å¢ƒ

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### Core
- **Electron**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **TypeScript**: å‹å®‰å…¨ãªJavaScript
- **React**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **Zustand**: è»½é‡çŠ¶æ…‹ç®¡ç†

### Styling & Build
- **Tailwind CSS**: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS
- **Webpack**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
- **PostCSS**: CSSå‡¦ç†ãƒ„ãƒ¼ãƒ«

### Development Tools
- **ESLint**: ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
- **Prettier**: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼

## å‰ææ¡ä»¶

- **Node.js** 18.0ä»¥é™
- **macOS** 13.0ä»¥é™
- **ccusage CLI** ãƒ„ãƒ¼ãƒ«

```bash
# ccusage CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g ccusage
```

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»é–‹ç™º

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
cd ccusage-electron-monitor
npm install
```

### 2. é–‹ç™ºç’°å¢ƒã§ã®å®Ÿè¡Œ

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ + ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ï¼‰
npm run dev

# ã¾ãŸã¯å€‹åˆ¥ã«å®Ÿè¡Œ
npm run dev:renderer  # Reacté–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆlocalhost:3000ï¼‰
npm run dev:main      # Electronãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹
```

### 3. ãƒ“ãƒ«ãƒ‰

```bash
# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# é…å¸ƒç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
npm run dist

# é…å¸ƒç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆï¼ˆDMGãªã—ï¼‰
npm run pack
```

### 4. é–‹ç™ºãƒ„ãƒ¼ãƒ«

```bash
# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# ãƒªãƒ³ã‚¿ãƒ¼å®Ÿè¡Œ
npm run lint

# ãƒªãƒ³ã‚¿ãƒ¼è‡ªå‹•ä¿®æ­£
npm run lint:fix
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
ccusage-electron-monitor/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                    # Electron Main Process
â”‚   â”‚   â”œâ”€â”€ index.ts            # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ tray.ts             # ã‚·ã‚¹ãƒ†ãƒ ãƒˆãƒ¬ã‚¤ç®¡ç†
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â””â”€â”€ ccusage.ts      # ccusage CLIçµ±åˆ
â”‚   â”œâ”€â”€ renderer/               # React Frontend
â”‚   â”‚   â”œâ”€â”€ index.tsx           # React ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ App.tsx             # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ components/         # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ store/              # ZustandçŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â””â”€â”€ styles.css          # Tailwind CSS
â”‚   â”œâ”€â”€ preload/                # IPC Bridge
â”‚   â”‚   â””â”€â”€ index.ts            # å®‰å…¨ãªIPCé€šä¿¡
â”‚   â””â”€â”€ shared/                 # å…±æœ‰å‹å®šç¾©
â”‚       â””â”€â”€ types.ts
â”œâ”€â”€ build/                      # Webpackè¨­å®š
â”œâ”€â”€ assets/                     # ã‚¢ãƒ—ãƒªã‚¢ã‚»ãƒƒãƒˆ
â””â”€â”€ dist/                       # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
```

## ä½¿ç”¨æ–¹æ³•

### ã‚¢ãƒ—ãƒªã®èµ·å‹•
1. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã«ãƒãƒ£ãƒ¼ãƒˆã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
2. ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä½¿ç”¨é‡ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ãã¾ã™
3. å³ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™

### è¡¨ç¤ºé …ç›®
- **Input Tokens**: å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°
- **Output Tokens**: å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°  
- **Total Cost**: ç·ä½¿ç”¨æ–™é‡‘ï¼ˆ$ï¼‰
- **Daily Progress**: æ—¥æ¬¡ä½¿ç”¨ç‡ï¼ˆ%ï¼‰
- **Last Updated**: æœ€çµ‚æ›´æ–°æ™‚åˆ»

### ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- ğŸŸ¢ **ç·‘**: ä½¿ç”¨ç‡ 75%æœªæº€ï¼ˆæ­£å¸¸ï¼‰
- ğŸŸ  **ã‚ªãƒ¬ãƒ³ã‚¸**: ä½¿ç”¨ç‡ 75-90%ï¼ˆæ³¨æ„ï¼‰
- ğŸ”´ **èµ¤**: ä½¿ç”¨ç‡ 90%ä»¥ä¸Šï¼ˆè­¦å‘Šï¼‰

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ (Electron)
- ã‚·ã‚¹ãƒ†ãƒ ãƒˆãƒ¬ã‚¤ç®¡ç†
- ccusage CLIã¨ã®çµ±åˆ
- 30ç§’é–“éš”ã§ã®ç›£è¦–ã‚¿ã‚¤ãƒãƒ¼
- IPCé€šä¿¡ãƒãƒ³ãƒ‰ãƒ©ãƒ¼

### ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ (React)
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- Zustandã«ã‚ˆã‚‹çŠ¶æ…‹ç®¡ç†
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º

### ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ (IPC)
```typescript
// ä½¿ç”¨é‡å–å¾—
const usage = await window.electronAPI.fetchUsage();

// è‡ªå‹•æ›´æ–°ã®ç›£è¦–
window.electronAPI.onUsageUpdate((usage) => {
  // ä½¿ç”¨é‡ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡
});
```

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### æ›´æ–°é–“éš”ã®å¤‰æ›´
```typescript
// src/main/index.ts
const MONITORING_INTERVAL = 30000; // ãƒŸãƒªç§’
```

### æ—¥æ¬¡äºˆç®—ã®å¤‰æ›´
```typescript
// src/main/services/ccusage.ts
private calculateUsagePercentage(cost: number): number {
  const dailyBudget = 20.0; // $20/æ—¥
  return Math.min((cost / dailyBudget) * 100.0, 100.0);
}
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ccusage ã‚³ãƒãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„
```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
which ccusage
npm list -g ccusage

# å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g ccusage
```

### Electron ãŒèµ·å‹•ã—ãªã„
```bash
# Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
node --version  # 18.0ä»¥é™ãŒå¿…è¦

# ä¾å­˜é–¢ä¿‚ã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules package-lock.json
npm install
```

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
```bash
# TypeScript å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# ESLint ãƒã‚§ãƒƒã‚¯
npm run lint
```

## é–‹ç™ºè€…å‘ã‘æƒ…å ±

### Swiftç‰ˆã‹ã‚‰ã®ç§»è¡Œãƒã‚¤ãƒ³ãƒˆ
1. **CCUsageService**: Swiftã®`Process`ã‹ã‚‰Node.js`spawn`ã«ç§»è¡Œ
2. **çŠ¶æ…‹ç®¡ç†**: SwiftUIã®`@Published`ã‹ã‚‰Zustandã«ç§»è¡Œ
3. **UI**: SwiftUIã‹ã‚‰React + Tailwind CSSã«ç§»è¡Œ
4. **ã‚·ã‚¹ãƒ†ãƒ ãƒˆãƒ¬ã‚¤**: `MenuBarExtra`ã‹ã‚‰`Electron.Tray`ã«ç§»è¡Œ

### ä»Šå¾Œã®æ‹¡å¼µäºˆå®š
- [ ] è¨­å®šç”»é¢ã®è¿½åŠ 
- [ ] é€šçŸ¥æ©Ÿèƒ½
- [ ] ä½¿ç”¨å±¥æ­´ã®æ°¸ç¶šåŒ–
- [ ] è¤‡æ•°ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¯¾å¿œ
- [ ] Windows/Linuxå¯¾å¿œ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ä½œè€…

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘TypeScriptå®Ÿè£…